<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Grocery Shopping App" /><meta property="og:locale" content="en_US" /><meta name="description" content="A collaborative grocery shopping app." /><meta property="og:description" content="A collaborative grocery shopping app." /><link rel="canonical" href="http://localhost:4000/2021/10/12/collab-grocery-shopping-app" /><meta property="og:url" content="http://localhost:4000/2021/10/12/collab-grocery-shopping-app" /><meta property="og:site_name" content="Hommus" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-12T11:58:00+11:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Grocery Shopping App" /> <script type="application/ld+json"> {"url":"http://localhost:4000/2021/10/12/collab-grocery-shopping-app","@type":"BlogPosting","description":"A collaborative grocery shopping app.","headline":"Grocery Shopping App","dateModified":"2021-10-12T11:58:00+11:00","datePublished":"2021-10-12T11:58:00+11:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/10/12/collab-grocery-shopping-app"},"@context":"https://schema.org"}</script><title> Grocery Shopping App - Hommus</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="Hommus" href="/atom.xml"><link rel="alternate" type="application/json" title="Hommus" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><link rel="stylesheet" href="/assets/css/syntax.css"> <script defer data-domain="hommus.github.io" src="https://plausible.io/js/plausible.js"></script><style> :root{--marker-color: 255, 234, 71}@font-face{font-family:'Inter';src:url(/assets/fonts/Inter-Regular.ttf) format("truetype");font-weight:normal;font-style:normal}@font-face{font-family:'InterBold';src:url(/assets/fonts/Inter-Bold.ttf) format("truetype");font-weight:bold;font-style:normal}*,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:'Inter', serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0;text-align:justify;line-height:1.6em;hyphens:auto;-webkit-hyphens:auto;-ms-hyphens:auto}.post h1,.post h2,.post h3,.post h4{margin:1rem 0;font-weight:bold;font-family:'InterBold', serif}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:1rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%;width:auto;height:100%;max-width:200px;border-radius:2px}hr{background:#edf2f7;height:1px;border:0;margin-top:1rem}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:50rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}input[type=text]{border-radius:2px}.introduction{margin-bottom:1rem}h2::before{content:"#";color:#cecece;margin:0 10px 0 0}.note-video{display:block;margin:30px auto 0 auto;border:1px solid #cecece;border-radius:2px}figcaption{margin:5px auto 30px auto;color:#919191;text-align:center}mark{padding:.1em 5px;margin:0 -5px;border-radius:10px;-webkit-box-decoration-break:clone;box-decoration-break:clone;background:linear-gradient(104deg, transparent 0.9%, rgba(var(--marker-color), 1.25) 2.4%, rgba(var(--marker-color), 0.5) 5.8%, rgba(var(--marker-color), 0.25) 93%, rgba(var(--marker-color), 0.7) 96%, transparent 98%),linear-gradient(183deg, transparent 0, rgba(var(--marker-color), 0.3) 7.9%, transparent 15%)}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">Hommus</h1>--><nav role="navigation"><ul><li><a href="/" >Projects</a></li><li><a href="/writing" >Writing</a></li><li><a href="/search" >Search</a></li><li><a href="/atom.xml" >RSS</a></li></ul></nav></header><section class="post"><h2>Grocery Shopping App</h2><p>I recently quit my job as a machine learning engineer to spend some time developing my own ideas and projects. The majority of these ideas require web development skills so I started with the easiest web-based project I could think of, a todo list. The collaborative grocery shopping app is a simple todo list tailored for groceries.</p><figure> <video poster="/assets/img/2021-10-12/v1.png" preload="auto" width="75%" title="Grocery App v1" loop="" autoplay="" playsinline="" muted="true" class="note-video"> <source src="/assets/img/2021-10-12/day5.mp4" type="video/mp4" /> </video><figcaption>Progress after one week of development.</figcaption></figure><p>I had limited experience using web languages such as HTML, CSS, and Javascript so I spent the first week refreshing my knowledge on these. I also thought it would be a good idea to abstract away complex functionality such as user authentication and database management, which I did by using an existing library called <a href="https://userbase.com/">Userbase</a>.</p><p>Although I did not know it at the time, setting up Userbase actually led to the implementation of the collaboration feature. Straight out of the box I had a functional app where I could edit the grocery list on one device and the data would sync instantaneously with all other devices connected. <mark>Very satisfying.</mark></p><p>I wanted the collaborative feature so I could differentiate the app from a standard todo list. The feature allows users to simultaneously edit and complete a shared grocery list. For example, my partner and I use the app when we’re shopping at different stores and I will regularly update her section of the grocery list with an item if it’s out of stock in my current store.</p><figure> <video poster="/assets/img/2021-10-12/v3.png" preload="auto" width="50%" title="Main Menu V3" loop="" autoplay="" playsinline="" muted="true" class="note-video"> <source src="/assets/img/2021-10-12/day12.mp4" type="video/mp4" /> </video><figcaption>Progress after two weeks of development.</figcaption></figure><p>After one week of full-time development, I had finished the app and wanted to try recreating it using a front-end framework. A front-end framework is a scaffold for building a website. It isn’t necessary, but it will help if I want to work on larger projects. As for my framework of choice, I opted for <a href="https://svelte.dev/">Svelte</a>, a framework that has been identified as having a shallow learning curve.</p><p>Learning a framework and recreating the project only added one additional week to the development time and most of it was spent trying to create a ‘drag and drop’ feature, which you can see in the video above. After cleaning up the user interface and making it mobile-friendly, I have now been using the app for several weeks and it has been surprisingly helpful!</p><p>To finish up, I’ve provided code below for future reference. The code is from the first week of development and does not include any usage of Svelte. I’m hoping it will be easier to read without the addition of a framework.</p><h2>Code</h2><h3>HTML</h3><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"apple-mobile-web-app-capable"</span> <span class="na">content=</span><span class="s">"yes"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"apple-mobile-web-app-status-bar-style"</span> <span class="na">content=</span><span class="s">"black"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"apple-mobile-web-app-title"</span> <span class="na">content=</span><span class="s">"Grocery List"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"apple-touch-icon"</span> <span class="na">href=</span><span class="s">"apple-touch-icon.png"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Grocery List<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"preconnect"</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"preconnect"</span> <span class="na">href=</span><span class="s">"https://fonts.gstatic.com"</span> <span class="na">crossorigin</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@600&amp;display=swap"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"index.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://sdk.userbase.com/2/userbase.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="c">&lt;!-- Loading View --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"loading-view"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>

    <span class="c">&lt;!-- Auth View --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"auth-view"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Grocery List<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;h2&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"login-form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput"</span> <span class="na">id=</span><span class="s">"login-username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">required</span> <span class="na">placeholder=</span><span class="s">"Username"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput"</span> <span class="na">id=</span><span class="s">"login-password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">required</span> <span class="na">placeholder=</span><span class="s">"Password"</span><span class="nt">&gt;&lt;br&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput sendIt"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Sign in"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"login-error"</span><span class="nt">&gt;&lt;/div&gt;</span>

        <span class="nt">&lt;h2&gt;</span>Create an account<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"signup-form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput"</span> <span class="na">id=</span><span class="s">"signup-username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">required</span> <span class="na">placeholder=</span><span class="s">"Username"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput"</span> <span class="na">id=</span><span class="s">"signup-password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">required</span> <span class="na">placeholder=</span><span class="s">"Password"</span><span class="nt">&gt;&lt;br&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput sendIt"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Create an account"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"signup-error"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="c">&lt;!-- To-dos View --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"todo-view"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Grocery List<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"todos"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"db-loading"</span><span class="nt">&gt;</span>Loading grocery list...<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"db-error"</span><span class="nt">&gt;&lt;/div&gt;</span>

        <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"add-todo-form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput groceries"</span> <span class="na">id=</span><span class="s">"add-todo"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">required</span> <span class="na">placeholder=</span><span class="s">"Groceries"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"add"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"+"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"add-todo-error"</span><span class="nt">&gt;&lt;/div&gt;</span>

        <span class="nt">&lt;hr&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput adminInput sendIt"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Clear grocery list"</span> <span class="na">id=</span><span class="s">"clear-grocery-button"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"upgradedInput adminInput sendIt"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Logout"</span> <span class="na">id=</span><span class="s">"logout-button"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"grocery-error"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"logout-error"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="c">&lt;!-- application code --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"index.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><h3>JS</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">userbase</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span> <span class="na">appId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">INSERT-USERBASE-APPID</span><span class="dl">'</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">session</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">session</span><span class="p">.</span><span class="nx">user</span> <span class="p">?</span> <span class="nx">showTodos</span><span class="p">(</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">)</span> <span class="p">:</span> <span class="nx">showAuth</span><span class="p">())</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">showAuth</span><span class="p">())</span>
    <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">loading-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">let</span> <span class="nx">isAdmin</span> <span class="o">=</span> <span class="kc">false</span>
<span class="kd">let</span> <span class="nx">databaseId</span> <span class="o">=</span> <span class="dl">''</span>

<span class="kd">function</span> <span class="nx">handleLogin</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>

    <span class="kd">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-username</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>
    <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-password</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>

    <span class="nx">userbase</span><span class="p">.</span><span class="nx">signIn</span><span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="na">rememberMe</span><span class="p">:</span> <span class="dl">'</span><span class="s1">local</span><span class="dl">'</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">showTodos</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">))</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleSignUp</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>

    <span class="kd">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-username</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>
    <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-password</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>

    <span class="nx">userbase</span><span class="p">.</span><span class="nx">signUp</span><span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="na">rememberMe</span><span class="p">:</span> <span class="dl">'</span><span class="s1">local</span><span class="dl">'</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">showTodos</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">))</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleLogout</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">userbase</span><span class="p">.</span><span class="nx">signOut</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">showAuth</span><span class="p">())</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">logout-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">showTodos</span><span class="p">(</span><span class="nx">username</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span>

    <span class="c1">// reset the todos view</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">db-loading</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">db-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">''</span>

    <span class="c1">// check if user is admin or not, and get database ID</span>
    <span class="nx">userbase</span><span class="p">.</span><span class="nx">getDatabases</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">databases</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isAdmin</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="nx">userbase</span><span class="p">.</span><span class="nx">openDatabase</span><span class="p">({</span><span class="na">databaseName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">,</span> <span class="nx">changeHandler</span> <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">db-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">isAdmin</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="nx">databaseId</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">databases</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">databaseId</span>
            <span class="nx">userbase</span><span class="p">.</span><span class="nx">openDatabase</span><span class="p">({</span> <span class="na">databaseId</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span> <span class="nx">changeHandler</span> <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">db-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">showAuth</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-username</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-password</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-username</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-password</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">''</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">changeHandler</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">db-loading</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>

    <span class="kd">const</span> <span class="nx">todosList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">todosList</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Add some groceries using the form below:</span><span class="dl">'</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// clear the list</span>
        <span class="nx">todosList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">''</span>

        <span class="c1">// render all the to-do items</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

            <span class="c1">// build the todo delete button</span>
            <span class="kd">const</span> <span class="nx">todoDelete</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">)</span>
            <span class="nx">todoDelete</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span>
            <span class="nx">todoDelete</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">inline-block</span><span class="dl">'</span>
            <span class="nx">todoDelete</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">isAdmin</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">deleteItem</span><span class="p">({</span> <span class="na">databaseName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span> <span class="p">})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">deleteItem</span><span class="p">({</span> <span class="na">databaseId</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span> <span class="p">})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span>
                
            <span class="p">}</span>

            <span class="c1">// build the todo checkbox</span>
            <span class="kd">const</span> <span class="nx">todoBox</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">)</span>
            <span class="nx">todoBox</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">checkbox</span><span class="dl">'</span>
            <span class="nx">todoBox</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span>
            <span class="nx">todoBox</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">complete</span> <span class="p">?</span> <span class="kc">true</span> <span class="p">:</span> <span class="kc">false</span>
            <span class="nx">todoBox</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">isAdmin</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">updateItem</span><span class="p">({</span> <span class="na">databaseName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span><span class="p">,</span> <span class="na">item</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">todo</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span><span class="p">:</span> <span class="o">!</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">complete</span>
                    <span class="p">}})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">updateItem</span><span class="p">({</span> <span class="na">databaseId</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span><span class="p">,</span> <span class="na">item</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">todo</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span><span class="p">:</span> <span class="o">!</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">complete</span>
                    <span class="p">}})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// build the todo label</span>
            <span class="kd">const</span> <span class="nx">todoLabel</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">label</span><span class="dl">'</span><span class="p">)</span>
            <span class="nx">todoLabel</span><span class="p">.</span><span class="nx">htmlFor</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span>
            <span class="nx">todoLabel</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">todo</span>
            <span class="nx">todoLabel</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">textDecoration</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">item</span><span class="p">.</span><span class="nx">complete</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">line-through</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>

            <span class="c1">// append the todo item to the list</span>
            <span class="kd">const</span> <span class="nx">todoItem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">)</span>
            <span class="nx">todoItem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">groceryList</span><span class="dl">'</span>
            <span class="nx">todoItem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">todoBox</span><span class="p">)</span>
            <span class="nx">todoItem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">todoLabel</span><span class="p">)</span>
            <span class="nx">todoItem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">todoDelete</span><span class="p">)</span>
            <span class="nx">todosList</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kd">const</span> <span class="nx">deleteList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">clear-grocery-button</span><span class="dl">'</span><span class="p">)</span>

        <span class="nx">deleteList</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">isAdmin</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">deleteItem</span><span class="p">({</span> <span class="na">databaseName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span> <span class="p">})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">userbase</span><span class="p">.</span><span class="nx">deleteItem</span><span class="p">({</span> <span class="na">databaseId</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span> <span class="na">itemId</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemId</span> <span class="p">})</span>
                    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
            
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">addTodoHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>

    <span class="kd">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isAdmin</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">userbase</span><span class="p">.</span><span class="nx">insertItem</span><span class="p">({</span> <span class="na">databaseName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">,</span> <span class="na">item</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">:</span> <span class="nx">todo</span> <span class="p">}})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span><span class="p">)</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">userbase</span><span class="p">.</span><span class="nx">insertItem</span><span class="p">({</span> <span class="na">databaseId</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span> <span class="na">item</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">:</span> <span class="nx">todo</span> <span class="p">}})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span><span class="p">)</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>


<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">login-form</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleLogin</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">signup-form</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleSignUp</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">add-todo-form</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="nx">addTodoHandler</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">logout-button</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleLogout</span><span class="p">)</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth-view</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>
</code></pre></div></div><h3>CSS</h3><div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">*,</span> <span class="o">*</span><span class="nd">:before</span><span class="o">,</span> <span class="o">*</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">text</span><span class="o">],</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">password</span><span class="o">],</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">button</span><span class="o">],</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">submit</span><span class="o">],</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">checkbox</span><span class="o">]</span> <span class="p">{</span>
    <span class="nl">-webkit-appearance</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">-webkit-border-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s1">"checkbox"</span><span class="o">]</span> <span class="p">{</span>
    <span class="nl">vertical-align</span><span class="p">:</span> <span class="nb">middle</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">4em</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">4em</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#bdc1c6</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">checkbox</span><span class="o">]</span><span class="nd">:checked</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2196F3</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">text</span><span class="o">],</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">password</span><span class="o">]</span> <span class="p">{</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">text</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="o">,</span> <span class="nt">button</span> <span class="p">{</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'Source Sans Pro'</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span> <span class="p">{</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">0.2em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">hr</span> <span class="p">{</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">border-top</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.1</span><span class="p">);</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
<span class="p">}</span>

<span class="nt">label</span> <span class="p">{</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="m">7px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="nb">large</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="o">,</span> <span class="nc">.add</span> <span class="p">{</span>
    <span class="nl">-webkit-appearance</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">-webkit-border-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="nb">x-large</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">2em</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">2em</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.add</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#309320</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.upgradedInput</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">3px</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="nb">large</span><span class="p">;</span>
    <span class="nl">min-height</span><span class="p">:</span> <span class="m">45px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.sendIt</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
    <span class="nl">text-transform</span><span class="p">:</span> <span class="nb">uppercase</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">0.8em</span><span class="p">;</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.adminInput</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">49%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.groceries</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">84%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.groceryList</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#todo-view</span><span class="o">,</span> <span class="nf">#auth-view</span> <span class="p">{</span>
    <span class="nl">min-width</span><span class="p">:</span> <span class="m">350px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><hr> <span class="meta"> <time datetime="2021-10-12T11:58:00+11:00">October 12, 2021</time> </span></section></main></body></html>